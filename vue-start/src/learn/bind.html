<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data bind</title>
    <script src="../js/vue.js" type="text/javascript"></script>
</head>
<body>
    <div id="root">
        单向：<input type="text" v-bind:value="name"> <br/>
        双向: <input type="text" v-model:value="name"> <br/>

        <h1>简写方式</h1>
        单向：<input type="text" :value="name"> <br/>
        双向: <input type="text" v-model="name"> <br/>

        <h1>Click</h1>
        <button v-on:click="showInfo">点击我看信息</button>
        <button @click="showInfo2($event, 66)">点击我看传递的传参数</button>

        <h1>添加一个属性</h1>
        <button @click="addProperty">点击添加</button>
        <h3>属性 newProperty.age = {{newProperty.age}} </h3>
        <h3 v-if="newProperty.name">新增属性 newProperty.name = {{newProperty.name}} </h3>

        <h1>fullNamae</h1>
        姓：<input type="text" v-model="fullFirstName"> <br>
        名：<input type="text" v-model="fullLastName"> <br>
        <span>拼接姓名：{{fullName}}</span>
    </div>
    <script type="text/javascript">
        let number = 10;
        let person = {
            name: '张三',
            sex: '男',
        };

        Object.defineProperty(person, 'age', {
            // value: 18,
            // enumerable: true,
            // writable: true,
            // configurable: true,
            get: function() {
                console.log('& person get function invocked');
                return number;
            },
            set(value) {
                console.log('set person age value');
                number = value;
            }
        });

        console.log(Object.keys(person));

        for (const key in person) {
            console.log('@', person[key]);
        }

        const x = new Vue({
            el: '#root',
            // data: {
            //     name: 'bindName'
            // }
            // data: ()=> { data 不能写箭头函数
            //     console.log('&&&', this);
            //     return {
            //         name: 'VaueDataName'
            //     }
            // }

            // data 必须用函数式写法
            data: function() {
                console.log('&&&', this)
                return {
                    name: 'VueDataFunctionName',
                    fullFirstName: '张',
                    fullLastName: '三',
                    newProperty: {
                        age: 20
                    }
                }
            },
            methods: {
                showInfo(event) {
                    console.log('showInfo', event)
                    window.alert('点击展示信息')
                },
                showInfo2(event, number) {
                    console.log("number = ", number, event)
                    window.alert('input number [' +  number + ']')
                },
                addProperty() {
                    this.$set(this.newProperty, 'name', '新增 name 属性')
                }
            },
            computed: {
                fullName: {
                    get() {
                        return this.fullFirstName + "=" + this.fullLastName
                    }
                }
            },
            watch: {
                fullFirstName: {
                    deep: true, // 深度监视，会递归内部属性值
                    handler(newValue, oldValue) {
                        console.log(newValue, '@', oldValue);
                    }
                }
            }
        });
        // x.$mount('#root');
    </script>
</body>
</html>